<!DOCTYPE html>
<html>
<head>
    <title>Code Visualiser</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { 
            font-family: "Courier New", monospace; margin: 0; padding: 20px; 
            background: #1e1e1e; color: #d4d4d4; 
        }
        .code-container { 
            display: flex; flex-wrap: wrap; gap: 20px; height: 100%; 
        }
        .code-panel { 
            flex: 1; min-width: 350px; background: #2d2d30; 
            border-radius: 8px; padding: 20px; overflow-y: auto; 
        }
        .visualizer { 
            flex: 1; min-width: 350px; background: #000; 
            border-radius: 8px; position: relative; min-height: 400px; 
            cursor: none; overflow: hidden;
        }
        .code-block { 
            background: #1e1e1e; padding: 15px; border-radius: 5px; 
            margin-bottom: 15px; border-left: 3px solid #007acc; white-space: pre-wrap;
        }
        .comment { color: #6a9955; }
        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .function { color: #dcdcaa; }
        .number { color: #b5cea8; }
        button { 
            background: #007acc; color: white; border: none; 
            padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; 
        }
        button:hover { background: #005a9e; }
        
        /* --- CSS CHANGE IS HERE --- */
        .enemy { 
            position: absolute; 
            width: 30px; 
            height: 30px; 
            background: red; 
            border-radius: 5px; 
            bottom: 20px;
            left: 50px;
        }
        .player { 
            position: absolute; 
            width: 40px; 
            height: 20px; 
            background: lime; 
            border-radius: 5px; 
            bottom: 20px; 
            pointer-events: none;
        }
        h3 { 
            color: #007acc; margin-top: 0; 
        }
    </style>
</head>
<body>
    <div class="code-container">
        <div class="code-panel">
            <button onclick="runDemo()">▶ Run Animation</button>
            <button onclick="stopDemo()">⏹ Stop</button>
            <button onclick="resetDemo()">↺ Reset</button>
        </div>
        <div class="visualizer" id="gameArea">
            <h3 style="color: white; text-align: center;">Visual Demo</h3>
            
            <div class="enemy" id="enemy1"></div>
            <div class="player" id="player"></div>
        </div>
    </div>

    <script>
        // (JavaScript remains the same as before)
        let animationId;
        let enemyX = 50;
        let enemySpeed = 2;
        const gameArea = document.getElementById("gameArea");
        const player = document.getElementById("player");
        const enemy = document.getElementById("enemy1");
        let gameWidth = gameArea.offsetWidth;

        player.style.left = (gameWidth / 2) - (player.offsetWidth / 2) + "px";

        function updatePlayerPosition(clientX) {
            const rect = gameArea.getBoundingClientRect();
            let relativeX = clientX - rect.left;
            
            const playerWidth = player.offsetWidth;

            if (relativeX < playerWidth / 2) {
                relativeX = playerWidth / 2;
            }
            if (relativeX > gameWidth - playerWidth / 2) {
                relativeX = gameWidth - playerWidth / 2;
            }
            
            player.style.left = (relativeX - playerWidth / 2) + "px";
        }

        gameArea.addEventListener('mousemove', (e) => {
            updatePlayerPosition(e.clientX);
        });

        gameArea.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (e.touches.length > 0) {
                updatePlayerPosition(e.touches[0].clientX);
            }
        }, { passive: false });


        function runDemo() {
            if (animationId) return;
            
            function animate() {
                gameWidth = gameArea.offsetWidth;
                enemyX += enemySpeed;
                
                if (enemyX > gameWidth - enemy.offsetWidth || enemyX < 0) {
                    enemySpeed *= -1;
                }
                
                enemy.style.left = enemyX + "px";
                
                const playerRect = player.getBoundingClientRect();
                const enemyRect = enemy.getBoundingClientRect();
                
                if (playerRect.left < enemyRect.right &&
                    playerRect.right > enemyRect.left &&
                    playerRect.top < enemyRect.bottom &&
                    playerRect.bottom > enemyRect.top) {
                    enemy.style.background = "orange";
                    player.style.background = "orange";
                } else {
                    enemy.style.background = "red";
                    player.style.background = "lime";
                }
                
                animationId = requestAnimationFrame(animate);
            }
            animate();
        }

        function stopDemo() {
            cancelAnimationFrame(animationId);
            animationId = null;
        }

        function resetDemo() {
            stopDemo();
            enemyX = 50;
            enemySpeed = 2;
            enemy.style.left = "50px";
            enemy.style.background = "red";
            player.style.background = "lime";
            player.style.left = (gameArea.offsetWidth / 2) - (player.offsetWidth / 2) + "px";
        }
    </script>
</body>
</html>
